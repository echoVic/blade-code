# Task å·¥å…·ç«å“åˆ†æ

> è°ƒç ”æ—¥æœŸï¼š2025-11-14
> å¯¹æ¯”å¯¹è±¡ï¼šClaude Codeã€OpenCodeã€Cursor 2.0

## ğŸ“Š ä¸»æµå®ç°å¯¹æ¯”

### 1. Claude Code (Anthropic å®˜æ–¹)

**æ¶æ„è®¾è®¡**ï¼š
```markdown
---
name: identifier-name
description: When this should be used
tools: tool1, tool2, tool3  # Optional
model: sonnet  # Optional
---

System prompt content here.
```

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… **Markdown + YAML Frontmatter**ï¼šé…ç½®å’Œæç¤ºè¯åˆ†ç¦»
- âœ… **ä¸‰å±‚ä¼˜å…ˆçº§**ï¼šé¡¹ç›®çº§ï¼ˆ`.claude/agents/`ï¼‰ > ç”¨æˆ·çº§ï¼ˆ`~/.claude/agents/`ï¼‰ > æ’ä»¶çº§
- âœ… **è‡ªåŠ¨å§”æ‰˜**ï¼šåŸºäº description åŒ¹é…è‡ªåŠ¨è°ƒç”¨
- âœ… **æ˜¾å¼è°ƒç”¨**ï¼š`Use the code-reviewer subagent...`
- âœ… **å·¥å…·éš”ç¦»**ï¼šæ¯ä¸ª subagent å¯é™åˆ¶å·¥å…·è®¿é—®
- âœ… **ç‹¬ç«‹ä¸Šä¸‹æ–‡**ï¼šé˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“
- âœ… **å¯æ¢å¤ä¼šè¯**ï¼šé€šè¿‡ `agentId` æ¢å¤å†å²å¯¹è¯
- âœ… **é˜²æ­¢æ— é™åµŒå¥—**ï¼šsubagent ä¸èƒ½åˆ›å»º subagent

**é…ç½®å­˜å‚¨**ï¼š
```
.claude/
  agents/           # é¡¹ç›®çº§ subagentsï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
    code-reviewer.md
    tester.md
~/.claude/
  agents/           # ç”¨æˆ·çº§ subagents
    custom-agent.md
```

**æœ€ä½³å®è·µ**ï¼š
1. ç”¨ Claude ç”Ÿæˆåˆå§‹ subagentï¼Œå†è‡ªå®šä¹‰
2. å•ä¸€èŒè´£è®¾è®¡
3. è¯¦ç»†çš„ç³»ç»Ÿæç¤ºè¯ï¼ˆå¸¦ç¤ºä¾‹å’Œçº¦æŸï¼‰
4. æœ€å°å·¥å…·æƒé™
5. é¡¹ç›®çº§ subagents çº³å…¥ç‰ˆæœ¬æ§åˆ¶

**æŠ€æœ¯ç»†èŠ‚**ï¼š
- ä¸æ”¯æŒ subagent åµŒå¥—
- æ¯æ¬¡æ‰§è¡Œåˆ†é…å”¯ä¸€ `agentId`
- ä¼šè¯å†å²å­˜å‚¨åœ¨ `agent-{agentId}.jsonl`
- å†…ç½® Plan subagentï¼ˆåªè¯»å·¥å…·ï¼šRead, Glob, Grep, Bashï¼‰

---

### 2. OpenCode (SST)

**æ¶æ„è®¾è®¡**ï¼š
```typescript
// agent.ts æ ¸å¿ƒå®ç°
export const Agent = {
  Info: z.object({
    mode: z.enum(['subagent', 'primary', 'all']),
    tools: z.record(z.boolean()),
    // ...
  }),

  generate: async () => {
    // ä½¿ç”¨ LLM ç”Ÿæˆæ–° agent é…ç½®
    return llm.prompt("Create agent based on request...")
  }
}
```

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… **ä¸‰ç§æ¨¡å¼**ï¼š
  - `subagent`ï¼šé€šç”¨ä»£ç†ï¼Œå¤„ç†ç ”ç©¶å’Œå¤šæ­¥æœç´¢
  - `primary`ï¼šæ„å»ºå’Œè§„åˆ’ä»£ç†ï¼Œç®¡ç†ä¸»å·¥ä½œæµ
  - `all`ï¼šè‡ªå®šä¹‰ä»£ç†ï¼Œå¯ç”¨äºä»»ä½•ä¸Šä¸‹æ–‡
- âœ… **å†…ç½®ä»£ç†**ï¼š`general`, `build`, `plan`
- âœ… **åŠ¨æ€ç”Ÿæˆ**ï¼šé€šè¿‡ LLM ç”Ÿæˆæ–° agent é…ç½®ï¼ˆtemperature 0.3ï¼‰
- âœ… **å·¥å…·å¸ƒå°”æ˜ å°„**ï¼š`tools: { bash: true, todowrite: false }`
- âœ… **æ·±åº¦åˆå¹¶é…ç½®**ï¼šä½¿ç”¨ `mergeDeep` è¦†ç›–é»˜è®¤é…ç½®
- âœ… **Task å·¥å…·**ï¼šæ”¯æŒå¯åŠ¨ subagent æ‰§è¡Œä»»åŠ¡

**é…ç½®å­˜å‚¨**ï¼š
```
~/.config/opencode/
  agent/
    [agent-name].md
~/.opencode/
  tool/              # è‡ªå®šä¹‰å·¥å…·
```

**å·²çŸ¥é—®é¢˜**ï¼š
- âŒ Task å·¥å…·æœ‰ bugï¼š`undefined is not an object (evaluating 'Q.model')`
- âŒ è‡ªå®šä¹‰ agent åœ¨ `mode` ä¸ºç©ºæ—¶è¡¨ç°å¼‚å¸¸

**å·¥å…·é›†**ï¼š
- bash, edit, webfetch, glob, grep, list
- lsp_diagnostics, lsp_hover, patch
- read, write, todowrite, todoread, task

---

### 3. Cursor 2.0 (Cursor AI)

**æ¶æ„è®¾è®¡**ï¼š
- **Composer Model**ï¼šä¸“æœ‰çš„ MoE æ¶æ„ + RL è®­ç»ƒ
- **Multi-Agent**ï¼šæœ€å¤š 8 ä¸ªç‹¬ç«‹ agent å¹¶è¡Œå·¥ä½œ
- **Git Worktrees**ï¼šæ¯ä¸ª agent ç‹¬ç«‹å·¥ä½œç©ºé—´
- **Remote Machines**ï¼šæ”¯æŒè¿œç¨‹æ‰§è¡Œ

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… **å¹¶è¡Œæ‰§è¡Œ**ï¼š8 ä¸ª agent åŒæ—¶å·¥ä½œï¼ˆä¸åŒæ¨¡å‹ï¼‰
- âœ… **å·¥ä½œç©ºé—´éš”ç¦»**ï¼šåŸºäº git worktrees
- âœ… **æ¨¡å‹é€‰æ‹©**ï¼šæ¯ä¸ª agent å¯ç”¨ä¸åŒæ¨¡å‹ï¼ˆGPT-4, Claude, Composerï¼‰
- âœ… **é«˜æ€§èƒ½**ï¼šComposer æ¨¡å‹ < 30s å®Œæˆå¤§éƒ¨åˆ†ä»»åŠ¡
- âœ… **å¼€å‘è€…æŒ‡æŒ¥**ï¼šäººå·¥å®¡æŸ¥å’Œåˆå¹¶ç»“æœ

**å…¸å‹å·¥ä½œæµ**ï¼š
```
Agent 1 (GPT-4)      â†’ ç³»ç»Ÿæ¶æ„è®¾è®¡
Agent 2 (Claude)     â†’ æ ¸å¿ƒç®—æ³•å®ç°
Agent 3 (Composer)   â†’ æ€§èƒ½ä¼˜åŒ–
```

**æŠ€æœ¯ç»†èŠ‚**ï¼š
- Composer ä½¿ç”¨ MXFP8 é‡åŒ–å†…æ ¸
- å†…ç½® codebase-wide è¯­ä¹‰æœç´¢
- 4 å€äºå…¶ä»–å‰æ²¿æ¨¡å‹çš„é€Ÿåº¦

---

## ğŸ” Blade å®ç°åˆ†æ

### å½“å‰å®ç°ï¼ˆV2 ç®€æ´è®¾è®¡ï¼‰

```typescript
// Blade Task Tool
Task({
  description: 'æŸ¥æ‰¾æµ‹è¯•æ–‡ä»¶',
  prompt: 'æŸ¥æ‰¾é¡¹ç›®ä¸­æ‰€æœ‰çš„æµ‹è¯•æ–‡ä»¶...',
  model: 'sonnet'  // å¯é€‰
})
```

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… **æç®€ API**ï¼šåªæœ‰ 2 ä¸ªå¿…éœ€å‚æ•°ï¼ˆdescription, promptï¼‰
- âœ… **åŠ¨æ€æç¤ºè¯**ï¼šè¿è¡Œæ—¶ç”Ÿæˆç³»ç»Ÿæç¤ºè¯
- âœ… **æ¨¡å‹å†³ç­–**ï¼šè®© LLM è‡ªå·±å†³å®šå·¥å…·å’Œç­–ç•¥
- âœ… **Agent Factory**ï¼šç»Ÿä¸€çš„ agent åˆ›å»ºæœºåˆ¶
- âœ… **è‡ªåŠ¨åˆå§‹åŒ–**ï¼šuseEffect ä¸­è®¾ç½® agentFactory

**å®ç°ä»£ç **ï¼š
```typescript
// åŠ¨æ€ç”Ÿæˆç³»ç»Ÿæç¤ºè¯
function buildDynamicSystemPrompt(taskPrompt: string, model: string): string {
  const basePrompt = `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ AI åŠ©æ‰‹ï¼Œè´Ÿè´£è‡ªä¸»å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š

${taskPrompt}

## æ‰§è¡ŒæŒ‡å—
ä½ å¯ä»¥ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„å·¥å…·æ¥å®Œæˆä»»åŠ¡ã€‚æ ¹æ®ä»»åŠ¡éœ€æ±‚è‡ªä¸»å†³å®šï¼š
- ä½¿ç”¨å“ªäº›å·¥å…·
- æ‰§è¡Œçš„æ­¥éª¤å’Œé¡ºåº
- è¾“å‡ºçš„æ ¼å¼å’Œç»“æ„

## å¯ç”¨å·¥å…·
- Read, Write, Edit, Grep, Glob, Bash, WebSearch, WebFetch

## æ‰§è¡ŒåŸåˆ™
1. ç³»ç»Ÿæ€§æ€è€ƒï¼šåˆ†æä»»åŠ¡ï¼Œåˆ¶å®šè®¡åˆ’ï¼Œé€æ­¥æ‰§è¡Œ
2. é«˜æ•ˆå·¥å…·ä½¿ç”¨ï¼šä¼˜å…ˆä½¿ç”¨ä¸“é—¨å·¥å…·ï¼Œé¿å…é‡å¤æ“ä½œ
3. å®Œæ•´è¾“å‡ºï¼šç¡®ä¿è¿”å›çš„ç»“æœå®Œæ•´ã€æ¸…æ™°ã€æœ‰ç”¨
4. é”™è¯¯å¤„ç†ï¼šé‡åˆ°é”™è¯¯æ—¶å°è¯•æ›¿ä»£æ–¹æ¡ˆ`;

  if (model === 'haiku') {
    return basePrompt + '\n\n**æ³¨æ„**: ä¼˜å…ˆè€ƒè™‘é€Ÿåº¦å’Œæ•ˆç‡ï¼Œå¿«é€Ÿå®Œæˆä»»åŠ¡ã€‚';
  } else if (model === 'opus') {
    return basePrompt + '\n\n**æ³¨æ„**: è¿½æ±‚é«˜è´¨é‡è¾“å‡ºï¼Œæ·±å…¥åˆ†æï¼Œæä¾›è¯¦ç»†çš„ç»“æœå’Œå»ºè®®ã€‚';
  }

  return basePrompt;
}

// Agent Factory è®¾ç½®
useEffect(() => {
  setTaskToolAgentFactory(async (customSystemPrompt?: string) => {
    return await Agent.create({
      systemPrompt: customSystemPrompt || replaceSystemPrompt,
      appendSystemPrompt: customSystemPrompt ? undefined : appendSystemPrompt,
      maxTurns: maxTurns,
    });
  });
}, [replaceSystemPrompt, appendSystemPrompt, maxTurns]);
```

---

## ğŸ“ˆ å¯¹æ¯”åˆ†æ

| ç‰¹æ€§ | Claude Code | OpenCode | Cursor 2.0 | Blade (å½“å‰) |
|-----|------------|----------|------------|--------------|
| **é…ç½®æ–¹å¼** | Markdown + YAML | Markdown + TS | å†…ç½® UI | çº¯ä»£ç ï¼ˆåŠ¨æ€ï¼‰ |
| **ç³»ç»Ÿæç¤ºè¯** | ç¡¬ç¼–ç  MD | å¯è‡ªå®šä¹‰ | ä¸“æœ‰æ¨¡å‹ | åŠ¨æ€ç”Ÿæˆ âœ… |
| **å·¥å…·éš”ç¦»** | âœ… æ”¯æŒ | âœ… æ”¯æŒ | âŒ ä¸æ˜ç¡® | âŒ ç»§æ‰¿æ‰€æœ‰å·¥å…· |
| **å¹¶è¡Œæ‰§è¡Œ** | âŒ å•ä»»åŠ¡ | âŒ å•ä»»åŠ¡ | âœ… 8 ä¸ªå¹¶è¡Œ | âŒ å•ä»»åŠ¡ |
| **æ¨¡å‹é€‰æ‹©** | âœ… æ¯ä¸ª agent | âœ… æ¯ä¸ª agent | âœ… æ¯ä¸ª agent | âœ… æ¯ä¸ªä»»åŠ¡ |
| **è‡ªåŠ¨å§”æ‰˜** | âœ… åŸºäºæè¿° | âœ… åŸºäºæ¨¡å¼ | âœ… æ™ºèƒ½åˆ†é… | âŒ æ‰‹åŠ¨è°ƒç”¨ |
| **å·¥ä½œç©ºé—´éš”ç¦»** | âŒ å…±äº« | âŒ å…±äº« | âœ… Git worktrees | âŒ å…±äº« |
| **å¯æ¢å¤ä¼šè¯** | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ | âŒ ä¸æ”¯æŒ | âŒ ä¸æ”¯æŒ |
| **é…ç½®å­˜å‚¨** | æ–‡ä»¶ç³»ç»Ÿ | æ–‡ä»¶ç³»ç»Ÿ | å†…ç½® | æ— ï¼ˆåŠ¨æ€ï¼‰ |
| **ä»£ç è¡Œæ•°** | ~150 è¡Œ/agent | ~200 è¡Œ | æœªçŸ¥ | 293 è¡Œ âœ… |
| **å¤æ‚åº¦** | ä¸­ï¼ˆé…ç½®æ–‡ä»¶ï¼‰ | ä¸­ï¼ˆæ¨¡å¼ç³»ç»Ÿï¼‰ | é«˜ï¼ˆå¤šæ¨¡å‹ï¼‰ | ä½ âœ… |
| **çµæ´»æ€§** | ä¸­ï¼ˆæ¨¡æ¿çº¦æŸï¼‰ | é«˜ï¼ˆLLM ç”Ÿæˆï¼‰ | ä½ï¼ˆå›ºå®šå·¥ä½œæµï¼‰ | é«˜ âœ… |

---

## âœ… Blade å®ç°çš„ä¼˜åŠ¿

### 1. **æç®€è®¾è®¡**
- **Claude Code**ï¼šéœ€è¦åˆ›å»º Markdown æ–‡ä»¶ï¼Œé…ç½® YAML frontmatter
- **OpenCode**ï¼šéœ€è¦ç†è§£ mode ç³»ç»Ÿï¼ˆsubagent/primary/allï¼‰
- **Blade**ï¼šåªéœ€ 2 ä¸ªå‚æ•°ï¼Œå¼€ç®±å³ç”¨ âœ…

### 2. **åŠ¨æ€é€‚åº”**
- **Claude Code**ï¼šç¡¬ç¼–ç ç³»ç»Ÿæç¤ºè¯ï¼Œä¿®æ”¹éœ€è¦ç¼–è¾‘æ–‡ä»¶
- **OpenCode**ï¼šè™½ç„¶å¯ä»¥ LLM ç”Ÿæˆï¼Œä½†ä»éœ€ä¿å­˜é…ç½®
- **Blade**ï¼šè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆï¼Œæ ¹æ®ä»»åŠ¡å†…å®¹è‡ªåŠ¨è°ƒæ•´ âœ…

### 3. **é›¶é…ç½®**
- **Claude Code**ï¼šéœ€è¦åœ¨ 3 ä¸ªç›®å½•ç®¡ç†é…ç½®æ–‡ä»¶
- **OpenCode**ï¼šéœ€è¦åœ¨ `~/.config/opencode/agent/` ç®¡ç†
- **Blade**ï¼šå®Œå…¨æ— é…ç½®ï¼Œä»£ç å³é…ç½® âœ…

### 4. **æ¨¡å‹å†³ç­–**
- **Claude Code**ï¼šéœ€è¦é¢„å…ˆæŒ‡å®šå·¥å…·åˆ—è¡¨
- **OpenCode**ï¼šå·¥å…·å¸ƒå°”æ˜ å°„ï¼ˆtools: { bash: true }ï¼‰
- **Blade**ï¼šå®Œå…¨ä¿¡ä»»æ¨¡å‹ï¼Œè®©å®ƒè‡ªå·±é€‰æ‹©å·¥å…· âœ…

---

## âš ï¸ Blade å®ç°çš„ä¸è¶³

### 1. **ç¼ºå°‘å·¥å…·éš”ç¦»**
```typescript
// å½“å‰å®ç°ï¼šå­ Agent ç»§æ‰¿æ‰€æœ‰å·¥å…·
const subAgent = await agentFactory(dynamicSystemPrompt);

// Claude Codeï¼šå¯ä»¥é™åˆ¶å·¥å…·
tools: Read, Grep, Glob  # åªå…è®¸åªè¯»å·¥å…·

// å»ºè®®ï¼šæ·»åŠ å¯é€‰çš„å·¥å…·é™åˆ¶
Task({
  description: 'æŸ¥æ‰¾æµ‹è¯•æ–‡ä»¶',
  prompt: '...',
  tools: ['Read', 'Grep', 'Glob']  // ğŸ†• å¯é€‰å·¥å…·é™åˆ¶
})
```

### 2. **ç¼ºå°‘è‡ªåŠ¨å§”æ‰˜**
```typescript
// å½“å‰å®ç°ï¼šéœ€è¦æ‰‹åŠ¨è°ƒç”¨ Task å·¥å…·
// LLM éœ€è¦ä¸»åŠ¨å†³å®šä½¿ç”¨ Task

// Claude Codeï¼šè‡ªåŠ¨å§”æ‰˜
// å½“æ£€æµ‹åˆ° "review code" æ—¶è‡ªåŠ¨è°ƒç”¨ code-reviewer subagent

// å»ºè®®ï¼šæ·»åŠ è§¦å‘å™¨æœºåˆ¶
export const taskTool = createTool({
  // ...
  triggers: ['åˆ†æä»£ç ', 'æŸ¥æ‰¾æ–‡ä»¶', 'ç”Ÿæˆæ–‡æ¡£'],  // ğŸ†• è§¦å‘è¯
})
```

### 3. **ç¼ºå°‘æŒä¹…åŒ–é…ç½®**
```typescript
// å½“å‰å®ç°ï¼šæ¯æ¬¡è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆ

// Claude Codeï¼šå¯ä»¥ä¿å­˜å’Œå¤ç”¨ subagent é…ç½®
.claude/agents/my-analyzer.md

// å»ºè®®ï¼šæ·»åŠ å¯é€‰çš„é…ç½®ä¿å­˜
Task({
  description: 'åˆ†æä»£ç ',
  prompt: '...',
  save: 'code-analyzer'  // ğŸ†• ä¿å­˜é…ç½®ä»¥ä¾¿å¤ç”¨
})
```

### 4. **ç¼ºå°‘å¹¶è¡Œæ‰§è¡Œ**
```typescript
// å½“å‰å®ç°ï¼šä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡

// Cursor 2.0ï¼šå¯ä»¥å¹¶è¡Œæ‰§è¡Œ 8 ä¸ª agent

// å»ºè®®ï¼šæ·»åŠ æ‰¹é‡æ‰§è¡Œ
TaskBatch([
  { description: 'åˆ†æå‰ç«¯', prompt: '...' },
  { description: 'åˆ†æåç«¯', prompt: '...' },
  { description: 'åˆ†ææ•°æ®åº“', prompt: '...' }
])  // ğŸ†• å¹¶è¡Œæ‰§è¡Œå¤šä¸ªä»»åŠ¡
```

### 5. **ç¼ºå°‘ä¼šè¯æ¢å¤**
```typescript
// å½“å‰å®ç°ï¼šæ¯æ¬¡åˆ›å»ºæ–°çš„å­ Agent

// Claude Codeï¼šå¯ä»¥æ¢å¤ä¹‹å‰çš„ä¼šè¯
// agentId ä¿å­˜åœ¨ agent-{agentId}.jsonl

// å»ºè®®ï¼šæ·»åŠ ä¼šè¯ ID
Task({
  description: 'ç»§ç»­åˆ†æ',
  prompt: '...',
  resumeFrom: 'agent-abc123'  // ğŸ†• æ¢å¤ä¹‹å‰çš„ä¼šè¯
})
```

---

## ğŸ¯ æ”¹è¿›å»ºè®®

### ä¼˜å…ˆçº§ 1ï¼šå·¥å…·éš”ç¦»ï¼ˆå®‰å…¨æ€§ï¼‰

**ç†ç”±**ï¼šé˜²æ­¢å­ Agent æ‰§è¡Œå±é™©æ“ä½œï¼ˆå¦‚åˆ é™¤æ–‡ä»¶ã€æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼‰

**å®ç°**ï¼š
```typescript
schema: z.object({
  description: z.string().min(3).max(100),
  prompt: z.string().min(10),
  model: z.enum(['haiku', 'sonnet', 'opus']).optional(),
  tools: z.array(z.string()).optional(),  // ğŸ†• å·¥å…·ç™½åå•
})

// æ‰§è¡Œæ—¶è¿‡æ»¤å·¥å…·
const allowedTools = params.tools || ['*'];
const subAgent = await agentFactory(dynamicSystemPrompt, allowedTools);
```

**ç¤ºä¾‹**ï¼š
```typescript
Task({
  description: 'æŸ¥æ‰¾æµ‹è¯•æ–‡ä»¶',
  prompt: 'æŸ¥æ‰¾æ‰€æœ‰ .test.ts æ–‡ä»¶',
  tools: ['Read', 'Grep', 'Glob']  // åªå…è®¸åªè¯»å·¥å…·
})
```

---

### ä¼˜å…ˆçº§ 2ï¼šè‡ªåŠ¨å§”æ‰˜ï¼ˆä¾¿åˆ©æ€§ï¼‰

**ç†ç”±**ï¼šå‡å°‘æ‰‹åŠ¨è°ƒç”¨ï¼Œè®© LLM æ›´ä¸»åŠ¨ä½¿ç”¨ Task å·¥å…·

**å®ç°**ï¼š
```typescript
description: {
  short: '...',
  long: `
...
**è§¦å‘åœºæ™¯**ï¼š
- å½“éœ€è¦æ·±å…¥åˆ†æä»£ç æ—¶
- å½“éœ€è¦æœç´¢å¤§é‡æ–‡ä»¶æ—¶
- å½“ä»»åŠ¡éœ€è¦å¤šä¸ªæ­¥éª¤æ—¶
**è‡ªåŠ¨å§”æ‰˜**ï¼šåŒ…å«å…³é”®è¯ï¼ˆåˆ†æã€æœç´¢ã€ç”Ÿæˆæ–‡æ¡£ï¼‰æ—¶è‡ªåŠ¨æ¨èä½¿ç”¨
  `
}
```

---

### ä¼˜å…ˆçº§ 3ï¼šå¯é€‰é…ç½®ä¿å­˜ï¼ˆå¯å¤ç”¨æ€§ï¼‰

**ç†ç”±**ï¼šå¸¸ç”¨ä»»åŠ¡å¯ä»¥ä¿å­˜ä¸ºæ¨¡æ¿ï¼Œé¿å…é‡å¤ç¼–å†™

**å®ç°**ï¼š
```typescript
// ä¿å­˜é…ç½®
Task({
  description: 'ä»£ç è´¨é‡åˆ†æ',
  prompt: 'åˆ†æä»£ç è´¨é‡ï¼Œæ£€æŸ¥...',
  save: 'code-quality-analyzer'
})

// å¤ç”¨é…ç½®
Task({
  use: 'code-quality-analyzer',
  prompt: 'åˆ†æ src/components/ ç›®å½•'  // è¦†ç›–åŸ prompt
})
```

**å­˜å‚¨ä½ç½®**ï¼š
```
.blade/
  tasks/
    code-quality-analyzer.json
```

---

### ä¼˜å…ˆçº§ 4ï¼šå¹¶è¡Œæ‰§è¡Œï¼ˆæ€§èƒ½ï¼‰

**ç†ç”±**ï¼šæå‡å¤§å‹ä»»åŠ¡æ‰§è¡Œæ•ˆç‡

**å®ç°**ï¼š
```typescript
export const taskBatchTool = createTool({
  name: 'TaskBatch',
  schema: z.object({
    tasks: z.array(z.object({
      description: z.string(),
      prompt: z.string(),
      model: z.enum(['haiku', 'sonnet', 'opus']).optional(),
    })),
    maxParallel: z.number().default(3),
  }),

  async execute(params, context) {
    const results = await Promise.allSettled(
      params.tasks.map(task =>
        executeTask(task, context)
      )
    );
    return aggregateResults(results);
  }
})
```

---

### ä¼˜å…ˆçº§ 5ï¼šä¼šè¯æ¢å¤ï¼ˆé•¿æœŸä»»åŠ¡ï¼‰

**ç†ç”±**ï¼šæ”¯æŒé•¿æœŸè¿è¡Œçš„åˆ†æä»»åŠ¡

**å®ç°**ï¼š
```typescript
Task({
  description: 'ç»§ç»­ä»£ç å®¡æŸ¥',
  resumeFrom: sessionId,  // ä»å†å²ä¼šè¯æ¢å¤
  prompt: 'ç»§ç»­å®¡æŸ¥å‰©ä½™æ–‡ä»¶'
})
```

---

## ğŸ“Š æœ€ç»ˆè¯„ä¼°

### Blade å½“å‰å®ç°çš„å®šä½

**å¼ºé¡¹**ï¼š
1. âœ… **æœ€ç®€æ´çš„ API**ï¼š2 ä¸ªå¿…éœ€å‚æ•°ï¼Œæ¯” Claude Code ç®€å• 50%
2. âœ… **æœ€çµæ´»çš„è®¾è®¡**ï¼šåŠ¨æ€ç”Ÿæˆï¼Œæ— éœ€é…ç½®æ–‡ä»¶
3. âœ… **æ¨¡å‹ä¸»å¯¼**ï¼šå®Œå…¨ä¿¡ä»» LLM çš„å†³ç­–èƒ½åŠ›
4. âœ… **ä»£ç æœ€å°‘**ï¼š293 è¡Œ vs Claude Code ~500 è¡Œ

**å¼±é¡¹**ï¼š
1. âŒ ç¼ºå°‘å·¥å…·éš”ç¦»ï¼ˆå®‰å…¨é£é™©ï¼‰
2. âŒ ç¼ºå°‘è‡ªåŠ¨å§”æ‰˜ï¼ˆéœ€æ‰‹åŠ¨è°ƒç”¨ï¼‰
3. âŒ ç¼ºå°‘å¹¶è¡Œæ‰§è¡Œï¼ˆæ€§èƒ½å—é™ï¼‰
4. âŒ ç¼ºå°‘ä¼šè¯æ¢å¤ï¼ˆé•¿æœŸä»»åŠ¡ä¸ä¾¿ï¼‰

### ç«äº‰åŠ›æ’å

**ç®€æ´æ€§**ï¼šBlade > OpenCode > Claude Code > Cursor
**å®‰å…¨æ€§**ï¼šClaude Code > OpenCode > Blade > Cursor
**æ€§èƒ½**ï¼šCursor >> Blade â‰ˆ Claude Code â‰ˆ OpenCode
**çµæ´»æ€§**ï¼šBlade > OpenCode > Claude Code > Cursor

### å»ºè®®çš„æ¼”è¿›è·¯å¾„

**Phase 1ï¼ˆç«‹å³ï¼‰**ï¼š
- âœ… ä¿æŒå½“å‰ç®€æ´è®¾è®¡
- âœ… æ·»åŠ å·¥å…·éš”ç¦»ï¼ˆ`tools` å‚æ•°ï¼‰
- âœ… æ”¹è¿›å·¥å…·æè¿°ï¼ˆæ·»åŠ è§¦å‘è¯æç¤ºï¼‰

**Phase 2ï¼ˆçŸ­æœŸï¼‰**ï¼š
- ğŸ”² æ·»åŠ å¯é€‰é…ç½®ä¿å­˜ï¼ˆ`.blade/tasks/`ï¼‰
- ğŸ”² æ·»åŠ æ‰¹é‡æ‰§è¡Œå·¥å…·ï¼ˆ`TaskBatch`ï¼‰
- ğŸ”² æ”¹è¿›é”™è¯¯å¤„ç†å’Œè¶…æ—¶æ§åˆ¶

**Phase 3ï¼ˆé•¿æœŸï¼‰**ï¼š
- ğŸ”² æ·»åŠ ä¼šè¯æ¢å¤æœºåˆ¶
- ğŸ”² æ·»åŠ å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- ğŸ”² æ·»åŠ èµ„æºç›‘æ§å’Œé™åˆ¶

---

## ğŸ‰ ç»“è®º

**Blade çš„ Task å·¥å…·å®ç°æ˜¯æ­£ç¡®çš„æ–¹å‘**ï¼š

1. **è®¾è®¡å“²å­¦æ­£ç¡®**ï¼š
   - Claude Code çš„æ–¹å‘æ˜¯å¯¹çš„ï¼ˆç®€æ´ã€æ¨¡å‹å†³ç­–ï¼‰
   - ä½† Claude Code ä»ç„¶æœ‰é…ç½®æ–‡ä»¶çš„å¤æ‚æ€§
   - Blade æ›´è¿›ä¸€æ­¥ï¼Œå®Œå…¨å»æ‰é…ç½®æ–‡ä»¶ âœ…

2. **å®ç°è´¨é‡é«˜**ï¼š
   - ä»£ç ç®€æ´ï¼ˆ293 è¡Œï¼‰
   - ç±»å‹å®‰å…¨ï¼ˆZod éªŒè¯ï¼‰
   - é”™è¯¯å¤„ç†å®Œå–„

3. **æ”¹è¿›ç©ºé—´æ˜ç¡®**ï¼š
   - ä¼˜å…ˆæ·»åŠ å·¥å…·éš”ç¦»ï¼ˆå®‰å…¨æ€§ï¼‰
   - å…¶ä»–åŠŸèƒ½å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€æ­¥æ·»åŠ 

4. **ç«äº‰ä¼˜åŠ¿**ï¼š
   - æ¯” Claude Code æ›´ç®€æ´
   - æ¯” OpenCode æ›´ç¨³å®š
   - æ¯” Cursor æ›´è½»é‡

**æœ€é‡è¦çš„æ˜¯**ï¼šBlade çš„è®¾è®¡æ˜¯é¢å‘æœªæ¥çš„â€”â€”ç›¸ä¿¡æ¨¡å‹çš„èƒ½åŠ›ï¼Œè®©å®ƒè‡ªå·±å†³å®šç­–ç•¥ï¼Œè€Œä¸æ˜¯ç”¨å¤æ‚çš„é…ç½®ç³»ç»Ÿé™åˆ¶å®ƒã€‚
