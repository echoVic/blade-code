# ğŸ§  ä¸Šä¸‹æ–‡ç®¡ç†æ¨¡å—å®ç°æ€»ç»“

## ğŸ“‹ æ¦‚è¿°

ä¸Šä¸‹æ–‡ç®¡ç†æ¨¡å—æ˜¯ Blade AI çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œä¸º AI Agent æä¾›äº†æŒä¹…åŒ–çš„å¯¹è¯è®°å¿†èƒ½åŠ›ã€‚è¯¥æ¨¡å—é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼Œå¹¶æä¾›äº†æ™ºèƒ½çš„ä¸Šä¸‹æ–‡å‹ç¼©å’Œè¿‡æ»¤æœºåˆ¶ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Agent ä¸»æ§åˆ¶å™¨                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ è‡ªåŠ¨æ³¨å†Œä¸Šä¸‹æ–‡ç»„ä»¶                                        â”‚
â”‚  â€¢ ç”Ÿå‘½å‘¨æœŸç®¡ç†                                              â”‚
â”‚  â€¢ æ™ºèƒ½èŠå¤©é›†æˆ                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ContextComponent                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†                                          â”‚
â”‚  â€¢ é…ç½®ç®¡ç†å’ŒéªŒè¯                                            â”‚
â”‚  â€¢ é«˜çº§ä¸Šä¸‹æ–‡æ“ä½œAPI                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ContextManager                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ä¸Šä¸‹æ–‡æ•°æ®ç»Ÿä¸€ç®¡ç†                                        â”‚
â”‚  â€¢ ä¼šè¯åˆ›å»ºå’ŒåŠ è½½                                            â”‚
â”‚  â€¢ æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨è®°å½•                                        â”‚
â”‚  â€¢ å­˜å‚¨å±‚åè°ƒ                                                â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚         â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Memory  â”‚ â”‚Persistâ”‚ â”‚ Cache â”‚ â”‚Compresâ”‚ â”‚ Filter    â”‚
â”‚ Store   â”‚ â”‚ Store â”‚ â”‚ Store â”‚ â”‚ sor   â”‚ â”‚ Processor â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ†å±‚æ¶æ„

#### 1. **ç»„ä»¶å±‚ (Component Layer)**
- **ContextComponent**: ç»§æ‰¿è‡ª `BaseComponent`ï¼Œæä¾›æ ‡å‡†åŒ–çš„ç»„ä»¶æ¥å£
- **èŒè´£**: é…ç½®ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ã€é«˜çº§APIå°è£…

#### 2. **ç®¡ç†å±‚ (Manager Layer)**
- **ContextManager**: æ ¸å¿ƒä¸Šä¸‹æ–‡ç®¡ç†å™¨
- **èŒè´£**: ä¼šè¯ç®¡ç†ã€æ•°æ®åè°ƒã€å­˜å‚¨ç­–ç•¥

#### 3. **å­˜å‚¨å±‚ (Storage Layer)**
- **MemoryStore**: å†…å­˜å­˜å‚¨ï¼Œå¿«é€Ÿè®¿é—®å½“å‰ä¼šè¯æ•°æ®
- **PersistentStore**: æŒä¹…åŒ–å­˜å‚¨ï¼Œç®¡ç†å†å²ä¼šè¯å’Œé•¿æœŸæ•°æ®
- **CacheStore**: ç¼“å­˜å±‚ï¼Œä¼˜åŒ–é¢‘ç¹è®¿é—®çš„æ•°æ®

#### 4. **å¤„ç†å±‚ (Processor Layer)**
- **ContextCompressor**: ä¸Šä¸‹æ–‡å‹ç¼©ï¼Œå¤„ç†å¤§å®¹é‡å¯¹è¯å†å²
- **ContextFilter**: ä¸Šä¸‹æ–‡è¿‡æ»¤ï¼Œæ™ºèƒ½é€‰æ‹©ç›¸å…³ä¿¡æ¯

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. ä¼šè¯ç®¡ç†

#### ä¼šè¯åˆ›å»ºæµç¨‹
```typescript
async createSession(
  userId?: string,
  preferences: Record<string, any> = {},
  configuration: Record<string, any> = {},
  customSessionId?: string
): Promise<string>
```

**å®ç°ç‰¹ç‚¹**:
- âœ… æ”¯æŒè‡ªå®šä¹‰ä¼šè¯ID
- âœ… å…ˆæ£€æŸ¥ä¼šè¯æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™åŠ è½½
- âœ… è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ä¼šè¯IDï¼ˆæ—¶é—´æˆ³+éšæœºå­—ç¬¦ï¼‰
- âœ… åˆ›å»ºå®Œæ•´çš„åˆ†å±‚ä¸Šä¸‹æ–‡æ•°æ®ç»“æ„

**æ•°æ®ç»“æ„**:
```typescript
interface ContextData {
  layers: {
    system: SystemContext;      // ç³»ç»Ÿä¿¡æ¯
    session: SessionContext;    // ä¼šè¯ä¿¡æ¯
    conversation: ConversationContext; // å¯¹è¯å†å²
    tool: ToolContext;         // å·¥å…·è°ƒç”¨è®°å½•
    workspace: WorkspaceContext; // å·¥ä½œç©ºé—´ä¿¡æ¯
  };
  metadata: {
    totalTokens: number;
    priority: number;
    lastUpdated: number;
  };
}
```

#### ä¼šè¯åŠ è½½æµç¨‹
```typescript
async loadSession(sessionId: string): Promise<boolean>
```

**å®ç°é€»è¾‘**:
1. æ£€æŸ¥å†…å­˜ä¸­æ˜¯å¦æœ‰åŒ¹é…çš„ä¼šè¯
2. ä»æŒä¹…åŒ–å­˜å‚¨åŠ è½½ä¼šè¯å’Œå¯¹è¯æ•°æ®
3. é‡å»ºå®Œæ•´çš„ä¸Šä¸‹æ–‡æ•°æ®ç»“æ„
4. æ›´æ–°å½“å‰ä¼šè¯ID

### 2. æ¶ˆæ¯ç®¡ç†

#### æ¶ˆæ¯æ·»åŠ æœºåˆ¶
```typescript
async addMessage(
  role: 'user' | 'assistant' | 'system',
  content: string,
  metadata?: Record<string, any>
): Promise<void>
```

**å¤„ç†æµç¨‹**:
1. åˆ›å»ºæ ‡å‡†æ¶ˆæ¯å¯¹è±¡ï¼ˆåŒ…å«IDã€æ—¶é—´æˆ³ã€å…ƒæ•°æ®ï¼‰
2. æ·»åŠ åˆ°å†…å­˜å­˜å‚¨
3. æ£€æŸ¥æ˜¯å¦éœ€è¦å‹ç¼©ï¼ˆåŸºäºtokené˜ˆå€¼ï¼‰
4. å¼‚æ­¥ä¿å­˜åˆ°æŒä¹…åŒ–å­˜å‚¨

#### æ™ºèƒ½ä¸Šä¸‹æ–‡æ„å»º
```typescript
async buildMessagesWithContext(
  userMessage: string,
  systemPrompt?: string,
  filterOptions?: ContextFilter
): Promise<ContextMessage[]>
```

**æ ¸å¿ƒé€»è¾‘**:
1. æ·»åŠ ç³»ç»Ÿæç¤ºè¯ï¼ˆå¦‚æœæä¾›ï¼‰
2. è·å–å¹¶è¿‡æ»¤å†å²ä¸Šä¸‹æ–‡
3. å¤„ç†å‹ç¼©åçš„ä¸Šä¸‹æ–‡ï¼ˆå¦‚éœ€è¦ï¼‰
4. æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯
5. è‡ªåŠ¨è®°å½•ç”¨æˆ·æ¶ˆæ¯åˆ°ä¸Šä¸‹æ–‡

### 3. å·¥å…·é›†æˆ

#### å·¥å…·è°ƒç”¨è®°å½•
```typescript
async addToolCall(toolCall: ToolCall): Promise<void>
```

**ToolCall ç»“æ„**:
```typescript
interface ToolCall {
  id: string;
  name: string;
  input: any;
  output: any;
  timestamp: number;
  status: 'pending' | 'success' | 'error';
  error?: string;
}
```

**å¤„ç†ç‰¹æ€§**:
- âœ… è‡ªåŠ¨ç¼“å­˜æˆåŠŸçš„å·¥å…·è°ƒç”¨ç»“æœ
- âœ… æ”¯æŒå·¥å…·çŠ¶æ€æ›´æ–°
- âœ… è®°å½•å®Œæ•´çš„å·¥å…·æ‰§è¡Œå†å²

### 4. å­˜å‚¨ç­–ç•¥

#### å¤šå±‚å­˜å‚¨æ¶æ„

**MemoryStore (å†…å­˜å­˜å‚¨)**
- **ç”¨é€”**: å½“å‰ä¼šè¯çš„å¿«é€Ÿè®¿é—®
- **ç‰¹ç‚¹**: 
  - å•ä¼šè¯æ•°æ®å­˜å‚¨
  - æ¯«ç§’çº§è®¿é—®é€Ÿåº¦
  - è¿›ç¨‹é‡å¯åæ•°æ®ä¸¢å¤±

**PersistentStore (æŒä¹…åŒ–å­˜å‚¨)**
- **ç”¨é€”**: é•¿æœŸæ•°æ®ä¿å­˜å’Œå†å²ä¼šè¯ç®¡ç†
- **ç‰¹ç‚¹**:
  - åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„JSONå­˜å‚¨
  - æ”¯æŒä¼šè¯æ‘˜è¦ç”Ÿæˆ
  - è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®
  - å­˜å‚¨å¥åº·æ£€æŸ¥

**CacheStore (ç¼“å­˜å­˜å‚¨)**
- **ç”¨é€”**: é¢‘ç¹è®¿é—®æ•°æ®çš„ä¸´æ—¶ç¼“å­˜
- **ç‰¹ç‚¹**:
  - LRUç¼“å­˜ç­–ç•¥
  - å¯é…ç½®TTL
  - å·¥å…·è°ƒç”¨ç»“æœç¼“å­˜
  - å‹ç¼©ä¸Šä¸‹æ–‡ç¼“å­˜

#### å­˜å‚¨ç›®å½•ç»“æ„
```
blade-context/
â”œâ”€â”€ sessions/
â”‚   â”œâ”€â”€ session_1749013393389_d6be1f17.json
â”‚   â””â”€â”€ session_1749013401783_9bde7a61.json
â”œâ”€â”€ conversations/
â”‚   â”œâ”€â”€ session_1749013393389_d6be1f17.json
â”‚   â””â”€â”€ session_1749013401783_9bde7a61.json
â””â”€â”€ metadata/
    â””â”€â”€ storage-info.json
```

### 5. æ™ºèƒ½å‹ç¼©

#### ContextCompressor
å½“å¯¹è¯å†å²è¶…è¿‡é…ç½®çš„tokené˜ˆå€¼æ—¶ï¼Œè‡ªåŠ¨è§¦å‘å‹ç¼©ï¼š

```typescript
class ContextCompressor {
  async compress(contextData: ContextData): Promise<CompressedContext>
}
```

**å‹ç¼©ç­–ç•¥**:
- ä¿ç•™æœ€è¿‘Næ¡æ¶ˆæ¯ï¼ˆå®Œæ•´ä¿å­˜ï¼‰
- å¯¹å†å²æ¶ˆæ¯ç”Ÿæˆæ‘˜è¦
- æå–å…³é”®è¯é¢˜å’Œå®ä½“
- å‹ç¼©å·¥å…·è°ƒç”¨å†å²

**å‹ç¼©ç»“æœ**:
```typescript
interface CompressedContext {
  summary: string;           // å¯¹è¯æ‘˜è¦
  keyTopics: string[];      // å…³é”®è¯é¢˜
  recentMessages: ContextMessage[]; // æœ€è¿‘æ¶ˆæ¯
  tokenCount: number;       // å‹ç¼©åtokenæ•°
  compressionRatio: number; // å‹ç¼©æ¯”ç‡
}
```

### 6. æ™ºèƒ½è¿‡æ»¤

#### ContextFilter
æ ¹æ®éœ€æ±‚æ™ºèƒ½é€‰æ‹©ç›¸å…³ä¸Šä¸‹æ–‡ï¼š

```typescript
interface ContextFilter {
  maxTokens?: number;       // æœ€å¤§tokenæ•°
  maxMessages?: number;     // æœ€å¤§æ¶ˆæ¯æ•°
  timeWindow?: number;      // æ—¶é—´çª—å£ï¼ˆæ¯«ç§’ï¼‰
  includeTools?: boolean;   // æ˜¯å¦åŒ…å«å·¥å…·è°ƒç”¨
  includeWorkspace?: boolean; // æ˜¯å¦åŒ…å«å·¥ä½œç©ºé—´ä¿¡æ¯
}
```

**è¿‡æ»¤é€»è¾‘**:
1. æ—¶é—´çª—å£è¿‡æ»¤ï¼ˆé»˜è®¤24å°æ—¶ï¼‰
2. æ¶ˆæ¯æ•°é‡é™åˆ¶ï¼ˆé»˜è®¤50æ¡ï¼‰
3. Tokenæ•°é‡é™åˆ¶ï¼ˆé»˜è®¤4000ï¼‰
4. ç›¸å…³æ€§è¯„åˆ†æ’åº

## ğŸš€ Agenté›†æˆ

### è‡ªåŠ¨ç»„ä»¶æ³¨å†Œ

```typescript
// Agentæ„é€ å‡½æ•°ä¸­
if (this.config.context?.enabled !== false) {
  const contextComponent = new ContextComponent('context', this.config.context);
  this.registerComponent(contextComponent);
}
```

### ç”Ÿå‘½å‘¨æœŸç®¡ç†

```typescript
// åˆå§‹åŒ–
await agent.init(); // è‡ªåŠ¨åˆå§‹åŒ–æ‰€æœ‰ç»„ä»¶

// é”€æ¯
await agent.destroy(); // è‡ªåŠ¨æ¸…ç†æ‰€æœ‰èµ„æº
```

### æ™ºèƒ½èŠå¤©é›†æˆ

#### å¸¦ä¸Šä¸‹æ–‡çš„æ™ºèƒ½èŠå¤©
```typescript
public async smartChatWithContext(message: string): Promise<AgentResponse>
```

**å®ç°æµç¨‹**:
1. æ„å»ºåŒ…å«å†å²çš„å®Œæ•´æ¶ˆæ¯åˆ—è¡¨
2. åˆ†ææ˜¯å¦éœ€è¦å·¥å…·è°ƒç”¨ï¼ˆåŸºäºå®Œæ•´ä¸Šä¸‹æ–‡ï¼‰
3. æ‰§è¡Œæ™ºèƒ½å¯¹è¯æˆ–å·¥å…·è°ƒç”¨
4. è®°å½•åŠ©æ‰‹å›å¤å’Œå·¥å…·è°ƒç”¨åˆ°ä¸Šä¸‹æ–‡
5. è¿”å›å¢å¼ºçš„å“åº”ç»“æœ

#### ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å·¥å…·è°ƒç”¨
- âœ… å·¥å…·è°ƒç”¨è®°å½•è‡ªåŠ¨ä¿å­˜
- âœ… æˆåŠŸç»“æœè‡ªåŠ¨ç¼“å­˜
- âœ… å·¥å…·çŠ¶æ€æŒç»­è·Ÿè¸ª
- âœ… ä¾èµ–å…³ç³»æ™ºèƒ½åˆ†æ

## ğŸ“Š é…ç½®é€‰é¡¹

### ContextComponentConfig
```typescript
interface ContextComponentConfig {
  debug?: boolean;                    // è°ƒè¯•æ¨¡å¼
  enabled?: boolean;                  // å¯ç”¨çŠ¶æ€
  storage?: {
    maxMemorySize?: number;           // å†…å­˜å¤§å°é™åˆ¶
    persistentPath?: string;          // æŒä¹…åŒ–è·¯å¾„
    cacheSize?: number;               // ç¼“å­˜å¤§å°
    compressionEnabled?: boolean;     // å‹ç¼©å¯ç”¨
  };
  defaultFilter?: {
    maxTokens?: number;               // é»˜è®¤tokené™åˆ¶
    maxMessages?: number;             // é»˜è®¤æ¶ˆæ¯é™åˆ¶
    timeWindow?: number;              // é»˜è®¤æ—¶é—´çª—å£
    includeTools?: boolean;           // é»˜è®¤åŒ…å«å·¥å…·
    includeWorkspace?: boolean;       // é»˜è®¤åŒ…å«å·¥ä½œç©ºé—´
  };
  compressionThreshold?: number;      // å‹ç¼©é˜ˆå€¼
  enableVectorSearch?: boolean;       // å‘é‡æœç´¢ï¼ˆé¢„ç•™ï¼‰
}
```

### é»˜è®¤é…ç½®
```typescript
const defaultConfig = {
  debug: false,
  enabled: true,
  storage: {
    maxMemorySize: 1000,
    persistentPath: './blade-context',
    cacheSize: 100,
    compressionEnabled: true,
  },
  defaultFilter: {
    maxTokens: 4000,
    maxMessages: 50,
    timeWindow: 24 * 60 * 60 * 1000, // 24å°æ—¶
    includeTools: true,
    includeWorkspace: true,
  },
  compressionThreshold: 6000,
  enableVectorSearch: false,
};
```

## ğŸ”„ ä½¿ç”¨æµç¨‹

### 1. åŸºæœ¬ä½¿ç”¨æµç¨‹

```bash
# 1. åˆ›å»ºæ–°ä¼šè¯å¯¹è¯
blade chat --context "æˆ‘æ˜¯å¼ ä¸‰ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆ"

# 2. ç»§ç»­å¯¹è¯ï¼ˆè‡ªåŠ¨è®°å¿†ï¼‰
blade chat --context "ä½ è®°å¾—æˆ‘çš„èŒä¸šå—ï¼Ÿ"

# 3. æŒ‡å®šä¼šè¯ID
blade chat --context --context-session "work-session" "ä»Šå¤©å­¦ä¹ äº†React"

# 4. ç»§ç»­æŒ‡å®šä¼šè¯
blade chat --context --context-session "work-session" "æˆ‘ä»¬ä¹‹å‰èŠäº†ä»€ä¹ˆï¼Ÿ"
```

### 2. äº¤äº’å¼æ¨¡å¼

```bash
# å¯åŠ¨å¸¦ä¸Šä¸‹æ–‡çš„äº¤äº’å¼èŠå¤©
blade chat -i --context --context-session "learning"

# åœ¨äº¤äº’æ¨¡å¼ä¸­çš„ç‰¹æ®Šå‘½ä»¤ï¼š
# - "stats": æŸ¥çœ‹ä¸Šä¸‹æ–‡ç»Ÿè®¡ä¿¡æ¯
# - "sessions": æœç´¢å†å²ä¼šè¯
# - "quit"/"exit": é€€å‡ºèŠå¤©
```

### 3. ç¨‹åºåŒ–ä½¿ç”¨

```typescript
import { Agent } from 'blade-ai';

const agent = new Agent({
  context: {
    enabled: true,
    storage: {
      persistentPath: './my-context'
    }
  }
});

await agent.init();

// åˆ›å»ºä¼šè¯
const sessionId = await agent.createContextSession('user123');

// å¯¹è¯
const response = await agent.chatWithContext('ä½ å¥½ï¼Œæˆ‘å«ææ˜');

// ç»§ç»­å¯¹è¯
const response2 = await agent.chatWithContext('ä½ è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿ');

// æ¸…ç†
await agent.destroy();
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. å­˜å‚¨ä¼˜åŒ–
- **åˆ†å±‚å­˜å‚¨**: å†…å­˜â†’ç¼“å­˜â†’æŒä¹…åŒ–ï¼Œé€å±‚ä¼˜åŒ–è®¿é—®é€Ÿåº¦
- **å¼‚æ­¥ä¿å­˜**: ä¸é˜»å¡ä¸»æµç¨‹çš„å¼‚æ­¥æŒä¹…åŒ–
- **æ™ºèƒ½ç¼“å­˜**: LRUç­–ç•¥å’ŒTTLç®¡ç†

### 2. å†…å­˜ç®¡ç†
- **è‡ªåŠ¨å‹ç¼©**: è¶…è¿‡é˜ˆå€¼è‡ªåŠ¨è§¦å‘å‹ç¼©
- **æ™ºèƒ½è¿‡æ»¤**: åªåŠ è½½ç›¸å…³çš„ä¸Šä¸‹æ–‡æ•°æ®
- **åƒåœ¾å›æ”¶**: å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®

### 3. å¹¶å‘ä¼˜åŒ–
- **å¤šä¼šè¯æ”¯æŒ**: æ¯ä¸ªä¼šè¯ç‹¬ç«‹ç®¡ç†
- **æ— é”è®¾è®¡**: é¿å…å¹¶å‘è®¿é—®å†²çª
- **èµ„æºéš”ç¦»**: ä¼šè¯é—´æ•°æ®å®Œå…¨éš”ç¦»

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### 1. æ•°æ®éš”ç¦»
- **ç”¨æˆ·éš”ç¦»**: ä¸åŒç”¨æˆ·çš„æ•°æ®å®Œå…¨åˆ†ç¦»
- **ä¼šè¯éš”ç¦»**: ä¸åŒä¼šè¯çš„ä¸Šä¸‹æ–‡ç‹¬ç«‹å­˜å‚¨
- **æ•æ„Ÿæ•°æ®**: è‡ªåŠ¨è¿‡æ»¤å’Œä¿æŠ¤æœºåˆ¶

### 2. å­˜å‚¨å®‰å…¨
- **è·¯å¾„éªŒè¯**: é˜²æ­¢è·¯å¾„éå†æ”»å‡»
- **æ–‡ä»¶æƒé™**: åˆç†çš„æ–‡ä»¶ç³»ç»Ÿæƒé™è®¾ç½®
- **æ•°æ®éªŒè¯**: åŠ è½½æ—¶çš„æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

### 3. é”™è¯¯å¤„ç†
- **ä¼˜é›…é™çº§**: ä¸Šä¸‹æ–‡å¤±è´¥æ—¶é™çº§åˆ°æ™®é€šæ¨¡å¼
- **å¼‚å¸¸æ¢å¤**: è‡ªåŠ¨æ¢å¤å’Œé”™è¯¯é‡è¯•æœºåˆ¶
- **æ•°æ®å¤‡ä»½**: å…³é”®æ•°æ®çš„è‡ªåŠ¨å¤‡ä»½

## ğŸ”® æ‰©å±•æ€§è®¾è®¡

### 1. å­˜å‚¨åç«¯æ‰©å±•
- **æ¥å£æŠ½è±¡**: æ ‡å‡†åŒ–çš„å­˜å‚¨æ¥å£è®¾è®¡
- **æ’ä»¶æœºåˆ¶**: æ”¯æŒä¸åŒå­˜å‚¨åç«¯ï¼ˆRedisã€MongoDBç­‰ï¼‰
- **é…ç½®é©±åŠ¨**: é€šè¿‡é…ç½®åˆ‡æ¢å­˜å‚¨æ–¹æ¡ˆ

### 2. å¤„ç†å™¨æ‰©å±•
- **å‹ç¼©ç®—æ³•**: æ”¯æŒä¸åŒçš„å‹ç¼©ç­–ç•¥
- **è¿‡æ»¤è§„åˆ™**: å¯æ‰©å±•çš„è¿‡æ»¤è§„åˆ™å¼•æ“
- **å‘é‡æœç´¢**: é¢„ç•™è¯­ä¹‰æœç´¢æ¥å£

### 3. åŠŸèƒ½æ‰©å±•
- **å¤šæ¨¡æ€æ”¯æŒ**: æ‰©å±•æ”¯æŒå›¾ç‰‡ã€éŸ³é¢‘ç­‰
- **å®æ—¶åŒæ­¥**: æ”¯æŒå¤šè®¾å¤‡åŒæ­¥
- **äº‘ç«¯å­˜å‚¨**: é›†æˆäº‘å­˜å‚¨æœåŠ¡

## ğŸ¯ æ€»ç»“

ä¸Šä¸‹æ–‡ç®¡ç†æ¨¡å—é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„åˆ†å±‚æ¶æ„ï¼Œä¸º Blade AI æä¾›äº†å¼ºå¤§çš„è®°å¿†èƒ½åŠ›ã€‚å…¶ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š

### ğŸš€ **æ ¸å¿ƒä¼˜åŠ¿**
- **ğŸ§  æ™ºèƒ½è®°å¿†**: AIèƒ½è®°ä½æ‰€æœ‰å†å²å¯¹è¯ï¼Œå®ç°çœŸæ­£çš„è¿ç»­å¯¹è¯
- **âš¡ é«˜æ€§èƒ½**: å¤šå±‚å­˜å‚¨ä¼˜åŒ–ï¼Œæ¯«ç§’çº§å“åº”
- **ğŸ”§ æ˜“é›†æˆ**: è‡ªåŠ¨åŒ–ç»„ä»¶ç®¡ç†ï¼Œé›¶é…ç½®å¯ç”¨
- **ğŸ›¡ï¸ å¯é æ€§**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œä¼˜é›…é™çº§
- **ğŸ“ˆ å¯æ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒå¤šç§æ‰©å±•

### ğŸ‰ **å®é™…æ•ˆæœ**
- ç”¨æˆ·å¯ä»¥è¿›è¡Œè·¨ä¼šè¯çš„è¿ç»­å¯¹è¯
- AIèƒ½å¤Ÿå¼•ç”¨ä¹‹å‰å¯¹è¯ä¸­çš„ä»»ä½•ä¿¡æ¯
- æ”¯æŒé•¿æœŸçš„å­¦ä¹ å’Œå·¥ä½œä¼šè¯ç®¡ç†
- å·¥å…·è°ƒç”¨å†å²å®Œæ•´è®°å½•å’Œæ™ºèƒ½ç¼“å­˜

è¿™ä¸ªå®ç°ä¸ºç”¨æˆ·æä¾›äº†ç±»ä¼¼ä¸çœŸäººå¯¹è¯çš„è¿ç»­æ€§ä½“éªŒï¼Œå¤§å¤§æå‡äº†AIåŠ©æ‰‹çš„å®ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚ 