# Slash 命令

Blade 提供了一套强大的斜杠命令系统，用于执行特定的系统操作。在交互式界面中，只需输入以 `/` 开头的命令即可触发。

## 快速开始

```bash
# 在 Blade 交互界面中输入
/help              # 查看所有可用命令
/init              # 分析项目并生成配置文件
/agents            # 管理 subagent 配置
```

## 核心命令

### `/init` - 项目初始化

分析当前项目并生成 `BLADE.md` 配置文件，帮助 AI 更好地理解你的项目。

**使用方式：**
```bash
/init
```

**工作流程：**

1. **检查现有文件**
   - 如果 `BLADE.md` 已存在，会分析现有内容并提供改进建议
   - 如果不存在，会创建新文件

2. **智能分析**
   - 读取 `package.json` 了解项目类型、依赖和脚本
   - 探索项目结构，识别关键目录和文件
   - 分析架构模式和代码组织方式

3. **生成配置**
   - 项目概览（类型、语言、框架）
   - 常用命令（从 package.json 提取）
   - 架构说明（结构、模式、关系）
   - 开发指南（测试、构建、部署）

**示例输出：**
```markdown
# BLADE.md

你是一个专门帮助 React + TypeScript 项目开发者的助手。

## 项目概览
- 类型: React 单页应用
- 框架: React 18 + Vite
- 语言: TypeScript

## 常用命令
- `npm run dev` - 启动开发服务器
- `npm run build` - 构建生产版本
- `npm test` - 运行测试

## 架构说明
...
```

### `/help` - 帮助信息

显示所有可用的 slash 命令及其说明。

```bash
/help
```

### `/clear` - 清除历史

清除当前会话的对话历史和屏幕内容，开始新的对话。

```bash
/clear
```

### `/agents` - 管理 Subagents

管理 subagent 配置文件，包括创建、编辑、删除操作。

```bash
/agents                    # 打开 subagents 管理界面
```

详见 [Subagents 系统](subagents.md)。

### `/mcp` - MCP 服务器状态

显示 MCP（Model Context Protocol）服务器的状态和可用工具。

```bash
/mcp
```

### `/resume` - 恢复会话

恢复之前的对话会话，继续未完成的工作。

```bash
/resume                    # 恢复最近的会话
```

### `/compact` - 压缩上下文

手动触发上下文压缩，生成对话总结并释放 token 空间。

```bash
/compact
```

### `/permissions` - 权限管理

管理本地权限规则，控制 Blade 可以执行的操作。

```bash
/permissions
```

### `/version` - 版本信息

显示 Blade Code 的版本信息和构建详情。

```bash
/version
```

### `/config` - 配置面板

打开配置面板，管理 Blade 的各项设置。

```bash
/config
```

## 自动补全

Blade 提供智能的命令自动补全功能：

**触发方式：**
- 输入 `/` 后自动显示建议
- 按 `Tab` 键补全选中的命令
- 使用 `↑/↓` 键在建议间导航

**智能匹配：**
- **前缀匹配**：输入 `/in` → 显示 `/init`
- **模糊匹配**：输入 `/ag` → 显示 `/agents`
- **别名支持**：部分命令支持短别名（如 `/h` → `/help`）

**匹配策略：**
1. 优先显示命令名匹配的结果
2. 其次显示别名匹配的结果
3. 最后显示描述匹配的结果（权重较低）

当有明确的前缀匹配时（如输入 `/init`），只显示精确匹配的命令，过滤掉低相关度的建议。

## 最佳实践

### 1. 项目初始化

每个新项目都应该运行 `/init` 命令，生成项目配置：

```bash
# 在项目根目录启动 Blade
blade

# 运行初始化
/init
```

生成的 `BLADE.md` 文件可以：
- 帮助 AI 更准确地理解项目结构
- 减少重复解释项目背景
- 提高代码生成的准确性

### 2. 定期更新配置

当项目发生重大变化时（如添加新依赖、重构架构），重新运行 `/init`：

```bash
/init
```

Blade 会分析现有配置，识别变化，并提供更新建议。

### 3. 会话管理

对于长期项目：
- 使用 `/clear` 开始新主题的讨论
- 使用 `/resume` 继续之前的工作
- 使用 `/compact` 在会话过长时压缩上下文

### 4. 使用快捷键

结合快捷键提高效率：
- `Ctrl+L` 快速清屏（等同于 `/clear`）
- `Esc` 隐藏命令建议
- `Tab` 快速补全命令

## 常见问题

### Q: `/init` 生成的内容不准确怎么办？

A: `/init` 使用 AI 分析项目，可能需要人工调整：
1. 运行 `/init` 后检查生成的 `BLADE.md`
2. 手动编辑不准确的部分
3. 下次运行 `/init` 时，AI 会在现有基础上改进

### Q: 如何添加自定义 slash 命令？

A: 当前版本不支持用户自定义 slash 命令。如有需求，请在 [GitHub Issues](https://github.com/echoVic/blade-code/issues) 提出。

### Q: 命令补全显示不相关的命令？

A: 这是模糊匹配的结果。输入更多字符可以提高匹配精度：
- 输入 `/i` → 可能显示多个命令
- 输入 `/in` → 只显示 `/init`

### Q: `/init` 命令执行很慢？

A: `/init` 需要分析整个项目，耗时取决于项目规模：
- 小项目（<100 文件）：10-30 秒
- 中型项目（100-1000 文件）：30-60 秒
- 大型项目（>1000 文件）：1-3 分钟

可以在项目根目录添加 `.bladeignore` 文件排除不必要的目录（如 `node_modules`、`dist`）。

## 下一步

- [Subagents 系统](subagents.md) - 了解如何使用专业化的 AI 代理
- [Plan 模式](plan-mode.md) - 学习如何规划复杂任务
- [@ 文件提及](at-file-mentions.md) - 快速引用项目文件
