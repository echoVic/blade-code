# ğŸ§° å·¥å…·åˆ—è¡¨

æœ¬æ–‡æ¡£åˆ—å‡º Blade Code æ‰€æœ‰å†…ç½®å·¥å…·åŠå…¶å‚æ•°è¯´æ˜ã€‚å·¥å…·é€šè¿‡ `ToolKind` åˆ†ç±»ï¼ˆReadOnly / Write / Executeï¼‰ï¼Œå½±å“æƒé™æ¨¡å¼çš„åˆ¤å®šã€‚

## æ–‡ä»¶æ“ä½œ

### Read

è¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€PDFã€Jupyter Notebookã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `file_path` | string | âœ… | æ–‡ä»¶ç»å¯¹è·¯å¾„ |
| `offset` | number | | èµ·å§‹è¡Œå·ï¼ˆä» 1 å¼€å§‹ï¼‰ |
| `limit` | number | | è¯»å–è¡Œæ•°ï¼ˆé»˜è®¤ 2000ï¼‰ |
| `encoding` | string | | æ–‡ä»¶ç¼–ç ï¼ˆé»˜è®¤ utf-8ï¼‰ |

**ç±»å‹**: ReadOnly  
**è¿”å›**: å¸¦è¡Œå·çš„æ–‡ä»¶å†…å®¹

### Write

å†™å…¥æˆ–åˆ›å»ºæ–‡ä»¶ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `file_path` | string | âœ… | æ–‡ä»¶ç»å¯¹è·¯å¾„ |
| `content` | string | âœ… | æ–‡ä»¶å†…å®¹ |
| `encoding` | string | | æ–‡ä»¶ç¼–ç ï¼ˆé»˜è®¤ utf-8ï¼‰ |
| `mode` | string | | å†™å…¥æ¨¡å¼ï¼šoverwrite / append |
| `mkdirs` | boolean | | æ˜¯å¦è‡ªåŠ¨åˆ›å»ºç›®å½• |

**ç±»å‹**: Write  
**ç‰¹æ€§**: æ”¯æŒå¤‡ä»½ã€æƒé™æ£€æŸ¥ã€ç›®å½•è‡ªåŠ¨åˆ›å»º

### Edit

æŒ‰å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢æ–‡ä»¶å†…å®¹ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `file_path` | string | âœ… | æ–‡ä»¶ç»å¯¹è·¯å¾„ |
| `old_string` | string | | è¦æ›¿æ¢çš„å­—ç¬¦ä¸² |
| `new_string` | string | | æ›¿æ¢åçš„å­—ç¬¦ä¸² |
| `pattern` | string | | æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ |
| `max_replacements` | number | | æœ€å¤§æ›¿æ¢æ¬¡æ•° |

**ç±»å‹**: Write  
**ç‰¹æ€§**: æ”¯æŒå›æ»šã€é¢„è§ˆã€å¹¶å‘æ–‡ä»¶é”

### NotebookEdit

ç¼–è¾‘ Jupyter Notebook æ–‡ä»¶ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `file_path` | string | âœ… | .ipynb æ–‡ä»¶è·¯å¾„ |
| `content` | string | âœ… | Notebook å†…å®¹ |

**ç±»å‹**: Write  
**ç‰¹æ€§**: ä¿æŒ JSON ç»“æ„å®Œæ•´æ€§

## æœç´¢å·¥å…·

### Glob

ä½¿ç”¨ glob æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `pattern` | string | âœ… | glob åŒ¹é…æ¨¡å¼ |
| `cwd` | string | | æœç´¢ç›®å½•ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰ |
| `ignore` | string[] | | å¿½ç•¥çš„æ¨¡å¼åˆ—è¡¨ |
| `limit` | number | | ç»“æœæ•°é‡é™åˆ¶ |

**ç±»å‹**: ReadOnly  
**ç‰¹æ€§**: åŸºäº fast-globï¼Œå†…ç½®å¿½ç•¥ node_modules ç­‰å¸¸è§ç›®å½•

### Grep

åŸºäº ripgrep çš„å†…å®¹æœç´¢ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `pattern` | string | âœ… | æœç´¢æ­£åˆ™è¡¨è¾¾å¼ |
| `path` | string | | æœç´¢è·¯å¾„ |
| `glob` | string | | æ–‡ä»¶è¿‡æ»¤æ¨¡å¼ |
| `context` | number | | ä¸Šä¸‹æ–‡è¡Œæ•° |
| `ignore_case` | boolean | | å¿½ç•¥å¤§å°å†™ |
| `max_count` | number | | æœ€å¤§åŒ¹é…æ•° |

**ç±»å‹**: ReadOnly  
**ç‰¹æ€§**: å››çº§æ™ºèƒ½é™çº§ï¼ˆripgrep â†’ git grep â†’ system grep â†’ JS fallbackï¼‰

## Shell å‘½ä»¤

### Bash

æ‰§è¡Œ Shell å‘½ä»¤ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `command` | string | âœ… | è¦æ‰§è¡Œçš„å‘½ä»¤ |
| `cwd` | string | | å·¥ä½œç›®å½• |
| `env` | object | | ç¯å¢ƒå˜é‡ |
| `background` | boolean | | åå°è¿è¡Œ |
| `timeout` | number | | è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |

**ç±»å‹**: Execute  
**è¿”å›**: åå°è¿è¡Œæ—¶è¿”å› `bash_id`ï¼Œå¯ç”¨äºåç»­æŸ¥è¯¢

### KillShell

ç»ˆæ­¢åå°è¿è¡Œçš„å‘½ä»¤ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `shell_id` | string | âœ… | Bash è¿”å›çš„åå°ä¼šè¯ ID |
| `signal` | string | | ç»ˆæ­¢ä¿¡å·ï¼ˆé»˜è®¤ SIGTERMï¼‰ |

**ç±»å‹**: Execute

## ç½‘ç»œå·¥å…·

### WebFetch

è·å–ç½‘é¡µæˆ– API å†…å®¹ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `url` | string | âœ… | è¯·æ±‚ URL |
| `method` | string | | HTTP æ–¹æ³•ï¼ˆé»˜è®¤ GETï¼‰ |
| `headers` | object | | è¯·æ±‚å¤´ |
| `body` | string | | è¯·æ±‚ä½“ |
| `trim` | boolean | | æ˜¯å¦è£å‰ªå“åº” |

**ç±»å‹**: ReadOnly

### WebSearch

ç½‘ç»œæœç´¢ï¼ˆåŸºäº DuckDuckGoï¼‰ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `query` | string | âœ… | æœç´¢å…³é”®è¯ |
| `site` | string | | é™å®šç«™ç‚¹ |
| `language` | string | | è¯­è¨€åå¥½ |
| `region` | string | | åœ°åŒºåå¥½ |

**ç±»å‹**: ReadOnly  
**è¿”å›**: æœç´¢ç»“æœæ‘˜è¦

## ä»»åŠ¡ç®¡ç†

### Task

å¯åŠ¨å­ä»£ç†æ‰§è¡Œä»»åŠ¡ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `subagent_type` | string | âœ… | å­ä»£ç†ç±»å‹ |
| `query` | string | âœ… | ä»»åŠ¡æè¿° |
| `description` | string | | ç®€çŸ­æè¿° |

**ç±»å‹**: ReadOnly  
**ç‰¹æ€§**: ä½¿ç”¨ `.blade/agents` æˆ– `~/.blade/agents` ä¸­çš„é…ç½®

### TaskOutput

è·å–åå°ä»»åŠ¡çš„è¾“å‡ºã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `task_id` | string | âœ… | ä»»åŠ¡ ID |

**ç±»å‹**: ReadOnly

### TodoWrite

ç®¡ç†ä¼šè¯å†…çš„ TODO åˆ—è¡¨ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `todos` | array | âœ… | TODO é¡¹ç›®åˆ—è¡¨ |
| `summary` | string | | å®Œæˆæ‘˜è¦ |

**ç±»å‹**: ReadOnly  
**å­˜å‚¨**: `~/.blade/todos/<session>-agent-<session>.json`

## Plan æ¨¡å¼å·¥å…·

### EnterPlanMode

è¿›å…¥ Plan æ¨¡å¼ï¼ˆåªè¯»è°ƒç ”æ¨¡å¼ï¼‰ã€‚

**ç±»å‹**: ReadOnly

### ExitPlanMode

é€€å‡º Plan æ¨¡å¼å¹¶æäº¤æ–¹æ¡ˆã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `title` | string | âœ… | æ–¹æ¡ˆæ ‡é¢˜ |
| `plan` | string | âœ… | æ–¹æ¡ˆå†…å®¹ï¼ˆMarkdownï¼‰ |

**ç±»å‹**: ReadOnly

## Spec æ¨¡å¼å·¥å…·

### EnterSpecMode

è¿›å…¥ Spec é©±åŠ¨å¼€å‘æ¨¡å¼ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `spec_path` | string | | Spec æ–‡ä»¶è·¯å¾„ |

**ç±»å‹**: Write

### UpdateSpec

æ›´æ–° Spec æ–‡ä»¶å†…å®¹ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `content` | string | âœ… | æ›´æ–°åçš„ Spec å†…å®¹ |

**ç±»å‹**: Write

### GetSpecContext

è·å–å½“å‰ Spec ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚

**ç±»å‹**: ReadOnly

### TransitionSpecPhase

è½¬æ¢ Spec å·¥ä½œæµé˜¶æ®µã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `phase` | string | âœ… | ç›®æ ‡é˜¶æ®µ |

**ç±»å‹**: Write

### AddTask

å‘ Spec æ·»åŠ ä»»åŠ¡ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `task` | object | âœ… | ä»»åŠ¡å®šä¹‰ |

**ç±»å‹**: Write

### UpdateTaskStatus

æ›´æ–° Spec ä¸­çš„ä»»åŠ¡çŠ¶æ€ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `task_id` | string | âœ… | ä»»åŠ¡ ID |
| `status` | string | âœ… | æ–°çŠ¶æ€ |

**ç±»å‹**: Write

### ValidateSpec

éªŒè¯ Spec æ–‡ä»¶å®Œæ•´æ€§ã€‚

**ç±»å‹**: ReadOnly

### ExitSpecMode

é€€å‡º Spec æ¨¡å¼ã€‚

**ç±»å‹**: Write

## ç³»ç»Ÿå·¥å…·

### AskUserQuestion

å‘ç”¨æˆ·æé—®å¹¶ç­‰å¾…å›å¤ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `question` | string | âœ… | é—®é¢˜å†…å®¹ |

**ç±»å‹**: ReadOnly

### Skill

è°ƒç”¨å·²æ³¨å†Œçš„ Skillã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `skill_name` | string | âœ… | Skill åç§° |
| `input` | string | | è¾“å…¥å‚æ•° |

**ç±»å‹**: Execute

### SlashCommand

æ‰§è¡Œ Slash å‘½ä»¤ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `command` | string | âœ… | å‘½ä»¤å†…å®¹ |

**ç±»å‹**: Execute  
**è¯´æ˜**: ä¾›ç³»ç»Ÿè°ƒç”¨ï¼Œç”¨æˆ·é€šå¸¸æ— éœ€ç›´æ¥ä½¿ç”¨

## MCP å·¥å…·

é€šè¿‡ `blade mcp add` æ³¨å†Œçš„ MCP æœåŠ¡å™¨ä¼šåœ¨è¿è¡Œæ—¶åŠ è½½ï¼Œå…¶å·¥å…·æŒ‰åŸå§‹åç§°åŠ å…¥å·¥å…·åˆ—è¡¨ã€‚

```bash
# æ·»åŠ  MCP æœåŠ¡å™¨
blade mcp add github -- npx -y @modelcontextprotocol/server-github

# æŸ¥çœ‹å·²æ³¨å†Œçš„æœåŠ¡å™¨
blade mcp list
```

## æƒé™ä¸å·¥å…·ç±»å‹

| å·¥å…·ç±»å‹ | default | autoEdit | plan | yolo | spec |
|----------|---------|----------|------|------|------|
| ReadOnly | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ |
| Write | âš ï¸ ç¡®è®¤ | âœ… è‡ªåŠ¨ | âŒ æ‹’ç» | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ |
| Execute | âš ï¸ ç¡®è®¤ | âš ï¸ ç¡®è®¤ | âŒ æ‹’ç» | âœ… è‡ªåŠ¨ | âš ï¸ ç¡®è®¤ |

è¯¦è§ [æƒé™ç³»ç»Ÿ](../configuration/permissions.md) ç« èŠ‚ã€‚

## å·¥å…·æ€»è§ˆ

| åˆ†ç±» | å·¥å…· | ç±»å‹ | è¯´æ˜ |
|------|------|------|------|
| æ–‡ä»¶æ“ä½œ | Read | ReadOnly | è¯»å–æ–‡ä»¶å†…å®¹ |
| æ–‡ä»¶æ“ä½œ | Write | Write | å†™å…¥æˆ–åˆ›å»ºæ–‡ä»¶ |
| æ–‡ä»¶æ“ä½œ | Edit | Write | æŒ‰å­—ç¬¦ä¸²/æ­£åˆ™æ›¿æ¢æ–‡ä»¶å†…å®¹ |
| æ–‡ä»¶æ“ä½œ | NotebookEdit | Write | ç¼–è¾‘ Jupyter Notebook |
| æœç´¢ | Glob | ReadOnly | glob æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶ |
| æœç´¢ | Grep | ReadOnly | åŸºäº ripgrep çš„å†…å®¹æœç´¢ |
| Shell | Bash | Execute | æ‰§è¡Œ Shell å‘½ä»¤ |
| Shell | KillShell | Execute | ç»ˆæ­¢åå°å‘½ä»¤ |
| ç½‘ç»œ | WebFetch | ReadOnly | è·å–ç½‘é¡µ/API å†…å®¹ |
| ç½‘ç»œ | WebSearch | ReadOnly | ç½‘ç»œæœç´¢ï¼ˆDuckDuckGoï¼‰ |
| ä»»åŠ¡ | Task | ReadOnly | å¯åŠ¨å­ä»£ç†æ‰§è¡Œä»»åŠ¡ |
| ä»»åŠ¡ | TaskOutput | ReadOnly | è·å–åå°ä»»åŠ¡è¾“å‡º |
| ä»»åŠ¡ | TodoWrite | ReadOnly | ç®¡ç†ä¼šè¯å†… TODO åˆ—è¡¨ |
| Plan | EnterPlanMode | ReadOnly | è¿›å…¥åªè¯»è°ƒç ”æ¨¡å¼ |
| Plan | ExitPlanMode | ReadOnly | é€€å‡ºå¹¶æäº¤æ–¹æ¡ˆ |
| Spec | EnterSpecMode | Write | è¿›å…¥ Spec é©±åŠ¨å¼€å‘æ¨¡å¼ |
| Spec | UpdateSpec | Write | æ›´æ–° Spec æ–‡ä»¶ |
| Spec | GetSpecContext | ReadOnly | è·å– Spec ä¸Šä¸‹æ–‡ |
| Spec | TransitionSpecPhase | Write | è½¬æ¢å·¥ä½œæµé˜¶æ®µ |
| Spec | AddTask | Write | æ·»åŠ ä»»åŠ¡ |
| Spec | UpdateTaskStatus | Write | æ›´æ–°ä»»åŠ¡çŠ¶æ€ |
| Spec | ValidateSpec | ReadOnly | éªŒè¯ Spec å®Œæ•´æ€§ |
| Spec | ExitSpecMode | Write | é€€å‡º Spec æ¨¡å¼ |
| ç³»ç»Ÿ | AskUserQuestion | ReadOnly | å‘ç”¨æˆ·æé—® |
| ç³»ç»Ÿ | Skill | Execute | è°ƒç”¨å·²æ³¨å†Œçš„ Skill |
| ç³»ç»Ÿ | SlashCommand | Execute | æ‰§è¡Œ Slash å‘½ä»¤ |
